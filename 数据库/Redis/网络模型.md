## redis为什么选用单线程
- 多线程需要精细的设计保证并发请求时，在保证线程安全的同时还能解决掉由于同步而带来的资源和性能的损耗
- 单线程在经过设计后，能达到比较高的吞吐满足需求：1、redis大部分操作都在内存中  2、IO模型上选用了多路复用机制
  
## 多路复用线程模型
![seletor](./assets/redis-04.jpg)

为了在请求到达时能通知到Redis线程，select/epoll提供了基于事件的回调机制，即针对不同事件的发生，调用相应的处理函数。

那么，回调机制是怎么工作的呢？其实，select/epoll一旦监测到FD上有请求到达时，就会触发相应的事件。

这些事件会被放进一个事件队列，Redis单线程对该事件队列不断进行处理。这样一来，Redis无需一直轮询是否有请求实际发生，这就可以避免造成CPU资源浪费。同时，Redis在对事件队列中的事件进行处理时，会调用相应的处理函数，这就实现了基于事件的回调。因为Redis一直在对事件队列进行处理，所以能及时响应客户端请求，提升Redis的响应性能。